# <%= @svc %>.conf
# This file is generated by Chef for <%= node[:fqdn] %>
# Do not edit by hand

description "<%= @svc %>"
start on started networking
stop on runlevel [016]

setuid <%= @user %>
setgid <%= @group %>

respawn
respawn limit 5 30

limit nofile 1000000 1000000
console log

# The default is 5 seconds, we may need a little longer
kill timeout 20

pre-start script   
    echo "[`date -u +%Y-%m-%dT%T.%3NZ`] (upstart) Starting"
end script

pre-stop script
    echo "[`date -u +%Y-%m-%dT%T.%3NZ`] (upstart) Stopping"
end script

script
  exec 301 --proto <%= @proto %> --domain <%= @domain %> --port <%= @port %>
end script

